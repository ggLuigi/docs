{"pageProps":{"note":{"id":"CQgNUiY4rSgejxxCZYPWy","title":"Elasticsearch","desc":"","updated":1646305583697,"created":1645539090151,"custom":{},"fname":"dev.elasticsearch","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"2b757a0c392ddc63800c8546e4e69ff6","links":[{"from":{"fname":"root","vaultName":"vault"},"type":"backlink","position":{"start":{"line":15,"column":3,"offset":250},"end":{"line":15,"column":38,"offset":285},"indent":[]},"value":"dev.elasticsearch","alias":"Elasticsearch"},{"from":{"fname":"dev.elasticsearch.kibana","vaultName":"vault"},"type":"backlink","position":{"start":{"line":3,"column":12,"offset":28},"end":{"line":3,"column":73,"offset":89},"indent":[]},"value":"dev.elasticsearch","alias":"Elasticsearch installation"}],"anchors":{"installation":{"type":"header","text":"Installation","value":"installation","line":11,"column":0,"depth":2},"config":{"type":"header","text":"Config","value":"config","line":40,"column":0,"depth":2},"architecture-of-elasticsearch":{"type":"header","text":"Architecture of Elasticsearch","value":"architecture-of-elasticsearch","line":44,"column":0,"depth":2},"sharding":{"type":"header","text":"Sharding","value":"sharding","line":76,"column":0,"depth":3},"replication":{"type":"header","text":"Replication","value":"replication","line":87,"column":0,"depth":3},"snapshot":{"type":"header","text":"Snapshot","value":"snapshot","line":93,"column":0,"depth":3},"node":{"type":"header","text":"Node","value":"node","line":96,"column":0,"depth":3}},"children":["0fvxavYACoxQOOAsCUtys","55mexi32x3t0vqdt952uh7s","mqg2951r8ndcyy340hj5y07","g0g7i6q68tpcz27w22apuls"],"parent":"qICYwYVyKusiFAEyNt3cW","data":{}},"body":"<h1 id=\"elasticsearch\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#elasticsearch\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Elasticsearch</h1>\n<p>Reference: <a href=\"https://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/\">https://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/</a>\nGithub for queries example: <a href=\"https://github.com/codingexplained/complete-guide-to-elasticsearch\">https://github.com/codingexplained/complete-guide-to-elasticsearch</a></p>\n<h2 id=\"installation\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#installation\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Installation</h2>\n<p>Elasticsearch comes with a bunch of jar files, along with Apache Lucene library.\nThere is no need for installation but download the elasticsearch jar file.</p>\n<p>Download the zip / tar file\nthen run</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">bin\\elasticsearch.bat #or\nbin/elasticsearch\n</code></pre>\n<p>!!! Keep the record of password, http cert and enrollment token shown on the console log\nThis is needed for access/requesting elasticsearch with security enabled</p>\n<p>To reset password for default user 'elastic', need to run the elasticsearch first,\nand run the below command in another terminal</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">bin\\elasticsearch-reset-password.bat -u elastic --url \"https://127.0.0.1:9200\"\n</code></pre>\n<p>To access elasticsearch with security enabled</p>\n<pre class=\"language-sh\"><code class=\"language-sh\">curl --cacert config/certs/http_ca.crt -u elastic https://localhost:9200\n# with password on the line\ncurl --cacert config/certs/http_ca.crt -u elastic:password https://localhost:9200\n</code></pre>\n<p>Reference: <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html\">https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html</a></p>\n<h2 id=\"config\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#config\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Config</h2>\n<p>Change any configurations in <code>elastic.yml</code> inside <code>config/</code> folder.\ne.g. Ip address, port</p>\n<h2 id=\"architecture-of-elasticsearch\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#architecture-of-elasticsearch\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Architecture of Elasticsearch</h2>\n<p>When we start up Elasticsearch(ES), we start up a node.</p>\n<ul>\n<li><strong>Node</strong> - an instance of ES that stores the data.<br>\nBring up more node to store more data, each node stores part of the data.<br>\nMultiple nodes can be run on a same machine.<br>\nIt always resides in a cluster.</li>\n<li><strong>Cluster</strong> - a collection of nodes that together contains all of the our data.<br>\nUsually one cluster is enough without the need of cross-cluster searches.<br>\nStill, you can run different clusters for different purposes. This can separate things logically and config differently.</li>\n<li><strong>document</strong> - A unit of data that stored in the cluster. A JSON object with metadata along with your stored desire data.<br>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mark\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"country\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"England\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n is stored in <code>document</code> like this inside <code>_source</code>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"_index\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"people\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"doc\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"123d2f\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_seq_no\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_primary_term\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"_source\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Mark\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"country\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"England\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n <em>Documents</em> are grouped together with <em>index</em> or <em>indices</em></li>\n</ul>\n<h3 id=\"sharding\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#sharding\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Sharding</h3>\n<p>[<strong>Scalibility</strong>] - Divide indices into small piece, called a <em>shard</em>. Thus, sharding is done on index level. It can scale horizontally with data volume.</p>\n<p>[<strong>Distributed data</strong>] - Data in one index can split into shards and place onto different nodes. It is not neccessarily to be placed on separate different nodes, some shards can place onto the same node while others are in another nodes.</p>\n<p>Each shard is independent.\n[<strong>Parallelized search</strong>] - Sharding improves performance by running searches on separate shards at the same time. With this, it can also utilize the hardware of separate nodes.</p>\n<p>Once the index is created, the shard number cannot be changed.\nWith ES >= 7.0.0, default shard number is 1. <strong>Split API</strong> can be used to increase the shard number after creation. It involves creating new index. In contrast, <strong>Shrink API</strong> can be used to decrease the shard number.</p>\n<h3 id=\"replication\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#replication\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Replication</h3>\n<p>[<strong>Redundancy</strong>] - Having a full replication of data can prevent a single failure on hardward causing data lost. It copies shards as <em>replica shards</em>. <em>Primary shard</em> means the shard is replicated. <em>Replication group</em> means the replication of shards and original shard.\nReplica shards are NEVER stored in the same node of primary shard.</p>\n<p>[<strong>Query Performance</strong>] - Having replica shards can improve search performance. CPU parallelization is used if multiple shards on the same nodes. E.g. if 3 requests incoming, 3 requests can be run on 3 different replica shards at the same time. CPU can run simultaneous task with threads and query different shards on the same node.</p>\n<h3 id=\"snapshot\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#snapshot\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Snapshot</h3>\n<p>[<strong>Backup</strong>] - Having snapshots can do backup before doing some (critical/risky) changes to the database.</p>\n<h3 id=\"node\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#node\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Node</h3>\n<ul>\n<li>Master - creating, deleting indices, keeping track of nodes</li>\n<li>Data - store the data shards, handle search query to data</li>\n<li>Ingest - ingest pipeline for processing data before adding to index</li>\n<li>Reference: <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html\">https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html</a></li>\n</ul>\n<hr>\n<strong>Children</strong>\n<ol>\n<li><a href=\"/mydocs/notes/0fvxavYACoxQOOAsCUtys\">Elasticstack</a></li>\n<li><a href=\"/mydocs/notes/55mexi32x3t0vqdt952uh7s\">Infomation</a></li>\n<li><a href=\"/mydocs/notes/mqg2951r8ndcyy340hj5y07\">Kibana</a></li>\n<li><a href=\"/mydocs/notes/g0g7i6q68tpcz27w22apuls\">Usage</a></li>\n</ol>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/mydocs/notes/8DgvZQhkfr4OxXTq7oX8p\">Root</a></li>\n<li><a href=\"/mydocs/notes/mqg2951r8ndcyy340hj5y07\">Kibana</a></li>\n</ul>","noteIndex":{"id":"8DgvZQhkfr4OxXTq7oX8p","title":"Root","desc":"","updated":1646395509969,"created":1644491379886,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"a3567590e84d81ede64d310f2c74b700","links":[{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.cpp","alias":"C++","position":{"start":{"line":7,"column":3,"offset":124},"end":{"line":7,"column":19,"offset":140},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.cpp"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.java","alias":"Java","position":{"start":{"line":8,"column":3,"offset":143},"end":{"line":8,"column":21,"offset":161},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.java"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video","alias":"Video","position":{"start":{"line":11,"column":5,"offset":176},"end":{"line":11,"column":26,"offset":197},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video.codec.h264","alias":"h264","position":{"start":{"line":12,"column":3,"offset":200},"end":{"line":12,"column":34,"offset":231},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video.codec.h264"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.elasticsearch","alias":"Elasticsearch","position":{"start":{"line":15,"column":3,"offset":250},"end":{"line":15,"column":38,"offset":285},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.elasticsearch"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.react","alias":"React","position":{"start":{"line":16,"column":3,"offset":288},"end":{"line":16,"column":22,"offset":307},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.react"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.nextjs","alias":"NextJs","position":{"start":{"line":17,"column":3,"offset":310},"end":{"line":17,"column":24,"offset":331},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.nextjs"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance","alias":"Finance tools","position":{"start":{"line":19,"column":4,"offset":336},"end":{"line":19,"column":29,"offset":361},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.ledger","alias":"Ledger","position":{"start":{"line":20,"column":3,"offset":364},"end":{"line":20,"column":28,"offset":389},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.ledger"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.hledger","alias":"Hledger","position":{"start":{"line":21,"column":3,"offset":392},"end":{"line":21,"column":30,"offset":419},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.hledger"}}],"anchors":{"welcome-to-my-note":{"type":"header","text":"Welcome to my note","value":"welcome-to-my-note","line":8,"column":0,"depth":1},"topics":{"type":"header","text":"Topics","value":"topics","line":11,"column":0,"depth":1},"programming-language":{"type":"header","text":"Programming Language","value":"programming-language","line":12,"column":0,"depth":2},"media":{"type":"header","text":"Media","value":"media","line":16,"column":0,"depth":2},"video":{"type":"header","text":"Video","value":"video","line":17,"column":0,"depth":3},"development":{"type":"header","text":"Development","value":"development","line":20,"column":0,"depth":2},"finance-tools":{"type":"header","text":"Finance tools","value":"finance-tools","line":25,"column":0,"depth":2},"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":31,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":35,"column":0,"depth":2}},"children":["FQhBPq4aS6x9DOptKmnOg","qICYwYVyKusiFAEyNt3cW","dqqbqwres0mwnmm56y70t78","lcbbM6iSiDijXw3ljTXti","ZpQdEjz6MWYVcz5Fm0wNo","HfK5n8lFMUPCVKJAmEpko","cR7GPfJpXiNkbUx1M2KQ0","8LxVYi89COu6QjGMl9b8D","Jj4ARdDvNQwLk7jx7H7Wt"],"parent":null,"data":{},"body":"\n# Welcome to my note\nI took notes to help me remember and understand the topic better.\n\n# Topics\n## Programming Language\n* [[C++|lang.cpp]]\n* [[Java|lang.java]]\n\n## Media\n### [[Video|media.video]]\n* [[h264|media.video.codec.h264]]\n\n## Development\n* [[Elasticsearch|dev.elasticsearch]]\n* [[React|dev.react]]\n* [[NextJs|dev.nextjs]]\n\n## [[Finance tools|finance]]\n* [[Ledger|finance.ledger]]\n* [[Hledger|finance.hledger]]\n\n\n---\n# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.84.0"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/mydocs","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://ggluigi.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}