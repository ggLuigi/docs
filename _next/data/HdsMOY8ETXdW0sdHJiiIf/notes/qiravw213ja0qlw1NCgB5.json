{"pageProps":{"note":{"id":"qiravw213ja0qlw1NCgB5","title":"Change Pid","desc":"","updated":1645434329911,"created":1644833075664,"custom":{},"fname":"proj.ts.tool.change-pid","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"c6c337135bb7a0032eaee5fc26af112c","links":[],"anchors":{"program-for-changing-pid-for-ts-file":{"type":"header","text":"Program for changing pid for ts file","value":"program-for-changing-pid-for-ts-file","line":8,"column":0,"depth":1},"changepid-flow":{"type":"header","text":"changePid flow","value":"changepid-flow","line":11,"column":0,"depth":2},"changepmtpid-flow":{"type":"header","text":"changePmtPid flow","value":"changepmtpid-flow","line":17,"column":0,"depth":2},"design-of-the-program-logic":{"type":"header","text":"Design of the program logic","value":"design-of-the-program-logic","line":21,"column":0,"depth":2},"design-of-the-usage":{"type":"header","text":"Design of the usage","value":"design-of-the-usage","line":44,"column":0,"depth":2}},"children":[],"parent":"A4qmbsEDBjkA31R3AkEO4","data":{}},"body":"<h1 id=\"change-pid\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#change-pid\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Change Pid</h1>\n<h1 id=\"program-for-changing-pid-for-ts-file\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#program-for-changing-pid-for-ts-file\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Program for changing pid for ts file</h1>\n<p>This is coded in C++.</p>\n<h2 id=\"changepid-flow\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#changepid-flow\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>changePid flow</h2>\n<ul>\n<li>Find PAT (pid 0 at 12-25 bit)</li>\n<li>find PMT packet in PAT\n<ul>\n<li>if multiple pmt,\n<ul>\n<li>find every PMT packets, find if it includes oldPid stream\n<ul>\n<li>if yes, set that PMT pid, and modified all that PMT packets with oldPid to newPid</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"changepmtpid-flow\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#changepmtpid-flow\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>changePmtPid flow</h2>\n<ul>\n<li>find PAT -> pid is 0, table id is 0, </li>\n<li>find all PMT packets by oldPid</li>\n<li>modified all its pid to newPid</li>\n</ul>\n<h2 id=\"design-of-the-program-logic\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#design-of-the-program-logic\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Design of the program logic</h2>\n<p>PMT packets: (0-base index)\nfind PAT (pid 0 at 12-25 bit) ->\ncheck if there is adaption field control (at 26-27 bit)\nif (01) -> payload starts at (if payload_unit_start_indicator is 1)40 bit + (check pointer_field number of bytes at 36bit)\nor (if PUSI is 0, start at 36 bit)\nif (11) -> payload starts at 40bit + (check adaptation_field_length 8 bits number of bytes)\nif (10 or 00) skip (cuz no payload)\nPMT pid is at 91-103 bit (assuming only 1 program)\nfind packets with PMT pid (at 11-23 bit)\ncheck if there is adaption field control (at 26-27 bit)\nif (01) -> payload starts at (if payload_unit_start_indicator is 1)40 bit + (check pointer_field number of bytes at 36bit)\nor (if PUSI is 0, start at 36 bit)\nif (11) -> payload starts at 40bit + (check adaptation_field_length 8 bits number of bytes)\nif (10 or 00) skip (cuz no payload)\nset this payload offset\nset pidInfo offset -> payloadOffset + (86+95 bit program_info_length) + program_info_length bytes * 8(if any)\nthe pid (to be removed) is at  pidInfo_offset + (11-23bit)\nfind if any ES_info_length at pidInfo_offset + (30-39bit number of bytes)\nif (found) remove from pidInfo_offset to ES_info bit\ncalculate how many bits are remove -> translate to byte\nneed to change section_length -> from payloadOffset + (12-23 bit) to subtract the bits to be removed</p>\n<h2 id=\"design-of-the-usage\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#design-of-the-usage\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Design of the usage</h2>\n<ul>\n<li>Change pid\n<ul>\n<li>./program changePid inputfilename --out &#x3C;> --old oldPid --new newPid\n<ul>\n<li>(optional) --from packetno --to packetno</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Remove pid\n<ul>\n<li>./program removePid inputfilename --out &#x3C;> pid\n<ul>\n<li>(optional) --from packetno --to packetno</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Change pmt pid\n<ul>\n<li>./program changePmtPid inputfilename --out &#x3C;> --old oldPid --new newPid\n<ul>\n<li>(optional) --from packetno --to packetno</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","noteIndex":{"id":"8DgvZQhkfr4OxXTq7oX8p","title":"Root","desc":"","updated":1646395509969,"created":1644491379886,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"a3567590e84d81ede64d310f2c74b700","links":[{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.cpp","alias":"C++","position":{"start":{"line":7,"column":3,"offset":124},"end":{"line":7,"column":19,"offset":140},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.cpp"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.java","alias":"Java","position":{"start":{"line":8,"column":3,"offset":143},"end":{"line":8,"column":21,"offset":161},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.java"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video","alias":"Video","position":{"start":{"line":11,"column":5,"offset":176},"end":{"line":11,"column":26,"offset":197},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video.codec.h264","alias":"h264","position":{"start":{"line":12,"column":3,"offset":200},"end":{"line":12,"column":34,"offset":231},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video.codec.h264"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.elasticsearch","alias":"Elasticsearch","position":{"start":{"line":15,"column":3,"offset":250},"end":{"line":15,"column":38,"offset":285},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.elasticsearch"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.react","alias":"React","position":{"start":{"line":16,"column":3,"offset":288},"end":{"line":16,"column":22,"offset":307},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.react"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.nextjs","alias":"NextJs","position":{"start":{"line":17,"column":3,"offset":310},"end":{"line":17,"column":24,"offset":331},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.nextjs"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance","alias":"Finance tools","position":{"start":{"line":19,"column":4,"offset":336},"end":{"line":19,"column":29,"offset":361},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.ledger","alias":"Ledger","position":{"start":{"line":20,"column":3,"offset":364},"end":{"line":20,"column":28,"offset":389},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.ledger"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.hledger","alias":"Hledger","position":{"start":{"line":21,"column":3,"offset":392},"end":{"line":21,"column":30,"offset":419},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.hledger"}}],"anchors":{"welcome-to-my-note":{"type":"header","text":"Welcome to my note","value":"welcome-to-my-note","line":8,"column":0,"depth":1},"topics":{"type":"header","text":"Topics","value":"topics","line":11,"column":0,"depth":1},"programming-language":{"type":"header","text":"Programming Language","value":"programming-language","line":12,"column":0,"depth":2},"media":{"type":"header","text":"Media","value":"media","line":16,"column":0,"depth":2},"video":{"type":"header","text":"Video","value":"video","line":17,"column":0,"depth":3},"development":{"type":"header","text":"Development","value":"development","line":20,"column":0,"depth":2},"finance-tools":{"type":"header","text":"Finance tools","value":"finance-tools","line":25,"column":0,"depth":2},"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":31,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":35,"column":0,"depth":2}},"children":["FQhBPq4aS6x9DOptKmnOg","qICYwYVyKusiFAEyNt3cW","dqqbqwres0mwnmm56y70t78","lcbbM6iSiDijXw3ljTXti","ZpQdEjz6MWYVcz5Fm0wNo","HfK5n8lFMUPCVKJAmEpko","cR7GPfJpXiNkbUx1M2KQ0","8LxVYi89COu6QjGMl9b8D","Jj4ARdDvNQwLk7jx7H7Wt"],"parent":null,"data":{},"body":"\n# Welcome to my note\nI took notes to help me remember and understand the topic better.\n\n# Topics\n## Programming Language\n* [[C++|lang.cpp]]\n* [[Java|lang.java]]\n\n## Media\n### [[Video|media.video]]\n* [[h264|media.video.codec.h264]]\n\n## Development\n* [[Elasticsearch|dev.elasticsearch]]\n* [[React|dev.react]]\n* [[NextJs|dev.nextjs]]\n\n## [[Finance tools|finance]]\n* [[Ledger|finance.ledger]]\n* [[Hledger|finance.hledger]]\n\n\n---\n# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.84.0"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/mydocs","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://ggluigi.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}