<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Elasticsearch</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Elasticsearch"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://ggluigi.github.io/mydocs/notes/CQgNUiY4rSgejxxCZYPWy/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2/22/2022"/><meta property="article:modified_time" content="3/3/2022"/><link rel="canonical" href="https://ggluigi.github.io/mydocs/notes/CQgNUiY4rSgejxxCZYPWy/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/mydocs/_next/static/css/0dbd00bc75d08f5b.css" as="style"/><link rel="stylesheet" href="/mydocs/_next/static/css/0dbd00bc75d08f5b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/mydocs/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/mydocs/_next/static/chunks/webpack-5633400558dcf5a8.js" defer=""></script><script src="/mydocs/_next/static/chunks/framework-dc33c0b5493501f0.js" defer=""></script><script src="/mydocs/_next/static/chunks/main-e572443993315a0d.js" defer=""></script><script src="/mydocs/_next/static/chunks/pages/_app-f3f10d65e7ac0515.js" defer=""></script><script src="/mydocs/_next/static/chunks/155-0a8d44b6408c244d.js" defer=""></script><script src="/mydocs/_next/static/chunks/pages/notes/%5Bid%5D-cf1f1f4b587fc42c.js" defer=""></script><script src="/mydocs/_next/static/HdsMOY8ETXdW0sdHJiiIf/_buildManifest.js" defer=""></script><script src="/mydocs/_next/static/HdsMOY8ETXdW0sdHJiiIf/_ssgManifest.js" defer=""></script><script src="/mydocs/_next/static/HdsMOY8ETXdW0sdHJiiIf/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout" style="flex-direction:row"><section class="ant-layout site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></section><section class="ant-layout side-layout-main" style="max-width:1200px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="elasticsearch"><a aria-hidden="true" class="anchor-heading" href="#elasticsearch"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Elasticsearch</h1>
<p>Reference: <a href="https://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/">https://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/</a>
Github for queries example: <a href="https://github.com/codingexplained/complete-guide-to-elasticsearch">https://github.com/codingexplained/complete-guide-to-elasticsearch</a></p>
<h2 id="installation"><a aria-hidden="true" class="anchor-heading" href="#installation"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Installation</h2>
<p>Elasticsearch comes with a bunch of jar files, along with Apache Lucene library.
There is no need for installation but download the elasticsearch jar file.</p>
<p>Download the zip / tar file
then run</p>
<pre class="language-sh"><code class="language-sh">bin\elasticsearch.bat #or
bin/elasticsearch
</code></pre>
<p>!!! Keep the record of password, http cert and enrollment token shown on the console log
This is needed for access/requesting elasticsearch with security enabled</p>
<p>To reset password for default user 'elastic', need to run the elasticsearch first,
and run the below command in another terminal</p>
<pre class="language-sh"><code class="language-sh">bin\elasticsearch-reset-password.bat -u elastic --url "https://127.0.0.1:9200"
</code></pre>
<p>To access elasticsearch with security enabled</p>
<pre class="language-sh"><code class="language-sh">curl --cacert config/certs/http_ca.crt -u elastic https://localhost:9200
# with password on the line
curl --cacert config/certs/http_ca.crt -u elastic:password https://localhost:9200
</code></pre>
<p>Reference: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html</a></p>
<h2 id="config"><a aria-hidden="true" class="anchor-heading" href="#config"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Config</h2>
<p>Change any configurations in <code>elastic.yml</code> inside <code>config/</code> folder.
e.g. Ip address, port</p>
<h2 id="architecture-of-elasticsearch"><a aria-hidden="true" class="anchor-heading" href="#architecture-of-elasticsearch"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Architecture of Elasticsearch</h2>
<p>When we start up Elasticsearch(ES), we start up a node.</p>
<ul>
<li><strong>Node</strong> - an instance of ES that stores the data.<br>
Bring up more node to store more data, each node stores part of the data.<br>
Multiple nodes can be run on a same machine.<br>
It always resides in a cluster.</li>
<li><strong>Cluster</strong> - a collection of nodes that together contains all of the our data.<br>
Usually one cluster is enough without the need of cross-cluster searches.<br>
Still, you can run different clusters for different purposes. This can separate things logically and config differently.</li>
<li><strong>document</strong> - A unit of data that stored in the cluster. A JSON object with metadata along with your stored desire data.<br>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Mark"</span><span class="token punctuation">,</span>
    <span class="token property">"country"</span><span class="token operator">:</span> <span class="token string">"England"</span>
<span class="token punctuation">}</span>
</code></pre>
 is stored in <code>document</code> like this inside <code>_source</code>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"_index"</span><span class="token operator">:</span> <span class="token string">"people"</span><span class="token punctuation">,</span>
    <span class="token property">"_type"</span><span class="token operator">:</span> <span class="token string">"doc"</span><span class="token punctuation">,</span>
    <span class="token property">"_id"</span><span class="token operator">:</span> <span class="token string">"123d2f"</span><span class="token punctuation">,</span>
    <span class="token property">"_version"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"_seq_no"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"_primary_term"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"_source"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Mark"</span><span class="token punctuation">,</span>
        <span class="token property">"country"</span><span class="token operator">:</span> <span class="token string">"England"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
 <em>Documents</em> are grouped together with <em>index</em> or <em>indices</em></li>
</ul>
<h3 id="sharding"><a aria-hidden="true" class="anchor-heading" href="#sharding"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Sharding</h3>
<p>[<strong>Scalibility</strong>] - Divide indices into small piece, called a <em>shard</em>. Thus, sharding is done on index level. It can scale horizontally with data volume.</p>
<p>[<strong>Distributed data</strong>] - Data in one index can split into shards and place onto different nodes. It is not neccessarily to be placed on separate different nodes, some shards can place onto the same node while others are in another nodes.</p>
<p>Each shard is independent.
[<strong>Parallelized search</strong>] - Sharding improves performance by running searches on separate shards at the same time. With this, it can also utilize the hardware of separate nodes.</p>
<p>Once the index is created, the shard number cannot be changed.
With ES >= 7.0.0, default shard number is 1. <strong>Split API</strong> can be used to increase the shard number after creation. It involves creating new index. In contrast, <strong>Shrink API</strong> can be used to decrease the shard number.</p>
<h3 id="replication"><a aria-hidden="true" class="anchor-heading" href="#replication"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Replication</h3>
<p>[<strong>Redundancy</strong>] - Having a full replication of data can prevent a single failure on hardward causing data lost. It copies shards as <em>replica shards</em>. <em>Primary shard</em> means the shard is replicated. <em>Replication group</em> means the replication of shards and original shard.
Replica shards are NEVER stored in the same node of primary shard.</p>
<p>[<strong>Query Performance</strong>] - Having replica shards can improve search performance. CPU parallelization is used if multiple shards on the same nodes. E.g. if 3 requests incoming, 3 requests can be run on 3 different replica shards at the same time. CPU can run simultaneous task with threads and query different shards on the same node.</p>
<h3 id="snapshot"><a aria-hidden="true" class="anchor-heading" href="#snapshot"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Snapshot</h3>
<p>[<strong>Backup</strong>] - Having snapshots can do backup before doing some (critical/risky) changes to the database.</p>
<h3 id="node"><a aria-hidden="true" class="anchor-heading" href="#node"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Node</h3>
<ul>
<li>Master - creating, deleting indices, keeping track of nodes</li>
<li>Data - store the data shards, handle search query to data</li>
<li>Ingest - ingest pipeline for processing data before adding to index</li>
<li>Reference: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html">https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html</a></li>
</ul>
<hr>
<strong>Children</strong>
<ol>
<li><a href="/mydocs/notes/0fvxavYACoxQOOAsCUtys">Elasticstack</a></li>
<li><a href="/mydocs/notes/55mexi32x3t0vqdt952uh7s">Infomation</a></li>
<li><a href="/mydocs/notes/mqg2951r8ndcyy340hj5y07">Kibana</a></li>
<li><a href="/mydocs/notes/g0g7i6q68tpcz27w22apuls">Usage</a></li>
</ol>
<hr>
<strong>Backlinks</strong>
<ul>
<li><a href="/mydocs/notes/8DgvZQhkfr4OxXTq7oX8p">Root</a></li>
<li><a href="/mydocs/notes/mqg2951r8ndcyy340hj5y07">Kibana</a></li>
</ul></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#installation" title="Installation">Installation</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#config" title="Config">Config</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#architecture-of-elasticsearch" title="Architecture of Elasticsearch">Architecture of Elasticsearch</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#sharding" title="Sharding">Sharding</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#replication" title="Replication">Replication</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#snapshot" title="Snapshot">Snapshot</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#node" title="Node">Node</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"CQgNUiY4rSgejxxCZYPWy","title":"Elasticsearch","desc":"","updated":1646305583697,"created":1645539090151,"custom":{},"fname":"dev.elasticsearch","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"2b757a0c392ddc63800c8546e4e69ff6","links":[{"from":{"fname":"root","vaultName":"vault"},"type":"backlink","position":{"start":{"line":15,"column":3,"offset":250},"end":{"line":15,"column":38,"offset":285},"indent":[]},"value":"dev.elasticsearch","alias":"Elasticsearch"},{"from":{"fname":"dev.elasticsearch.kibana","vaultName":"vault"},"type":"backlink","position":{"start":{"line":3,"column":12,"offset":28},"end":{"line":3,"column":73,"offset":89},"indent":[]},"value":"dev.elasticsearch","alias":"Elasticsearch installation"}],"anchors":{"installation":{"type":"header","text":"Installation","value":"installation","line":11,"column":0,"depth":2},"config":{"type":"header","text":"Config","value":"config","line":40,"column":0,"depth":2},"architecture-of-elasticsearch":{"type":"header","text":"Architecture of Elasticsearch","value":"architecture-of-elasticsearch","line":44,"column":0,"depth":2},"sharding":{"type":"header","text":"Sharding","value":"sharding","line":76,"column":0,"depth":3},"replication":{"type":"header","text":"Replication","value":"replication","line":87,"column":0,"depth":3},"snapshot":{"type":"header","text":"Snapshot","value":"snapshot","line":93,"column":0,"depth":3},"node":{"type":"header","text":"Node","value":"node","line":96,"column":0,"depth":3}},"children":["0fvxavYACoxQOOAsCUtys","55mexi32x3t0vqdt952uh7s","mqg2951r8ndcyy340hj5y07","g0g7i6q68tpcz27w22apuls"],"parent":"qICYwYVyKusiFAEyNt3cW","data":{}},"body":"\u003ch1 id=\"elasticsearch\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#elasticsearch\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eElasticsearch\u003c/h1\u003e\n\u003cp\u003eReference: \u003ca href=\"https://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/\"\u003ehttps://harmonic-owlstars.udemy.com/course/elasticsearch-complete-guide/\u003c/a\u003e\nGithub for queries example: \u003ca href=\"https://github.com/codingexplained/complete-guide-to-elasticsearch\"\u003ehttps://github.com/codingexplained/complete-guide-to-elasticsearch\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"installation\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#installation\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eInstallation\u003c/h2\u003e\n\u003cp\u003eElasticsearch comes with a bunch of jar files, along with Apache Lucene library.\nThere is no need for installation but download the elasticsearch jar file.\u003c/p\u003e\n\u003cp\u003eDownload the zip / tar file\nthen run\u003c/p\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003ebin\\elasticsearch.bat #or\nbin/elasticsearch\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e!!! Keep the record of password, http cert and enrollment token shown on the console log\nThis is needed for access/requesting elasticsearch with security enabled\u003c/p\u003e\n\u003cp\u003eTo reset password for default user 'elastic', need to run the elasticsearch first,\nand run the below command in another terminal\u003c/p\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003ebin\\elasticsearch-reset-password.bat -u elastic --url \"https://127.0.0.1:9200\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo access elasticsearch with security enabled\u003c/p\u003e\n\u003cpre class=\"language-sh\"\u003e\u003ccode class=\"language-sh\"\u003ecurl --cacert config/certs/http_ca.crt -u elastic https://localhost:9200\n# with password on the line\ncurl --cacert config/certs/http_ca.crt -u elastic:password https://localhost:9200\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eReference: \u003ca href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html\"\u003ehttps://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-stack-security.html\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"config\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#config\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eConfig\u003c/h2\u003e\n\u003cp\u003eChange any configurations in \u003ccode\u003eelastic.yml\u003c/code\u003e inside \u003ccode\u003econfig/\u003c/code\u003e folder.\ne.g. Ip address, port\u003c/p\u003e\n\u003ch2 id=\"architecture-of-elasticsearch\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#architecture-of-elasticsearch\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eArchitecture of Elasticsearch\u003c/h2\u003e\n\u003cp\u003eWhen we start up Elasticsearch(ES), we start up a node.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNode\u003c/strong\u003e - an instance of ES that stores the data.\u003cbr\u003e\nBring up more node to store more data, each node stores part of the data.\u003cbr\u003e\nMultiple nodes can be run on a same machine.\u003cbr\u003e\nIt always resides in a cluster.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eCluster\u003c/strong\u003e - a collection of nodes that together contains all of the our data.\u003cbr\u003e\nUsually one cluster is enough without the need of cross-cluster searches.\u003cbr\u003e\nStill, you can run different clusters for different purposes. This can separate things logically and config differently.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003edocument\u003c/strong\u003e - A unit of data that stored in the cluster. A JSON object with metadata along with your stored desire data.\u003cbr\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Mark\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"country\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"England\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n is stored in \u003ccode\u003edocument\u003c/code\u003e like this inside \u003ccode\u003e_source\u003c/code\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_index\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"people\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_type\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"doc\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_id\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"123d2f\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_version\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_seq_no\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_primary_term\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"_source\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Mark\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"country\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"England\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n \u003cem\u003eDocuments\u003c/em\u003e are grouped together with \u003cem\u003eindex\u003c/em\u003e or \u003cem\u003eindices\u003c/em\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"sharding\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#sharding\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eSharding\u003c/h3\u003e\n\u003cp\u003e[\u003cstrong\u003eScalibility\u003c/strong\u003e] - Divide indices into small piece, called a \u003cem\u003eshard\u003c/em\u003e. Thus, sharding is done on index level. It can scale horizontally with data volume.\u003c/p\u003e\n\u003cp\u003e[\u003cstrong\u003eDistributed data\u003c/strong\u003e] - Data in one index can split into shards and place onto different nodes. It is not neccessarily to be placed on separate different nodes, some shards can place onto the same node while others are in another nodes.\u003c/p\u003e\n\u003cp\u003eEach shard is independent.\n[\u003cstrong\u003eParallelized search\u003c/strong\u003e] - Sharding improves performance by running searches on separate shards at the same time. With this, it can also utilize the hardware of separate nodes.\u003c/p\u003e\n\u003cp\u003eOnce the index is created, the shard number cannot be changed.\nWith ES \u003e= 7.0.0, default shard number is 1. \u003cstrong\u003eSplit API\u003c/strong\u003e can be used to increase the shard number after creation. It involves creating new index. In contrast, \u003cstrong\u003eShrink API\u003c/strong\u003e can be used to decrease the shard number.\u003c/p\u003e\n\u003ch3 id=\"replication\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#replication\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eReplication\u003c/h3\u003e\n\u003cp\u003e[\u003cstrong\u003eRedundancy\u003c/strong\u003e] - Having a full replication of data can prevent a single failure on hardward causing data lost. It copies shards as \u003cem\u003ereplica shards\u003c/em\u003e. \u003cem\u003ePrimary shard\u003c/em\u003e means the shard is replicated. \u003cem\u003eReplication group\u003c/em\u003e means the replication of shards and original shard.\nReplica shards are NEVER stored in the same node of primary shard.\u003c/p\u003e\n\u003cp\u003e[\u003cstrong\u003eQuery Performance\u003c/strong\u003e] - Having replica shards can improve search performance. CPU parallelization is used if multiple shards on the same nodes. E.g. if 3 requests incoming, 3 requests can be run on 3 different replica shards at the same time. CPU can run simultaneous task with threads and query different shards on the same node.\u003c/p\u003e\n\u003ch3 id=\"snapshot\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#snapshot\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eSnapshot\u003c/h3\u003e\n\u003cp\u003e[\u003cstrong\u003eBackup\u003c/strong\u003e] - Having snapshots can do backup before doing some (critical/risky) changes to the database.\u003c/p\u003e\n\u003ch3 id=\"node\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#node\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eNode\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eMaster - creating, deleting indices, keeping track of nodes\u003c/li\u003e\n\u003cli\u003eData - store the data shards, handle search query to data\u003c/li\u003e\n\u003cli\u003eIngest - ingest pipeline for processing data before adding to index\u003c/li\u003e\n\u003cli\u003eReference: \u003ca href=\"https://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html\"\u003ehttps://www.elastic.co/guide/en/elasticsearch/reference/8.0/modules-node.html\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cstrong\u003eChildren\u003c/strong\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/0fvxavYACoxQOOAsCUtys\"\u003eElasticstack\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/55mexi32x3t0vqdt952uh7s\"\u003eInfomation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/mqg2951r8ndcyy340hj5y07\"\u003eKibana\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/g0g7i6q68tpcz27w22apuls\"\u003eUsage\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003chr\u003e\n\u003cstrong\u003eBacklinks\u003c/strong\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/8DgvZQhkfr4OxXTq7oX8p\"\u003eRoot\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"/mydocs/notes/mqg2951r8ndcyy340hj5y07\"\u003eKibana\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","noteIndex":{"id":"8DgvZQhkfr4OxXTq7oX8p","title":"Root","desc":"","updated":1646395509969,"created":1644491379886,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}},"contentHash":"a3567590e84d81ede64d310f2c74b700","links":[{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.cpp","alias":"C++","position":{"start":{"line":7,"column":3,"offset":124},"end":{"line":7,"column":19,"offset":140},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.cpp"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"lang.java","alias":"Java","position":{"start":{"line":8,"column":3,"offset":143},"end":{"line":8,"column":21,"offset":161},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"lang.java"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video","alias":"Video","position":{"start":{"line":11,"column":5,"offset":176},"end":{"line":11,"column":26,"offset":197},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"media.video.codec.h264","alias":"h264","position":{"start":{"line":12,"column":3,"offset":200},"end":{"line":12,"column":34,"offset":231},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"media.video.codec.h264"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.elasticsearch","alias":"Elasticsearch","position":{"start":{"line":15,"column":3,"offset":250},"end":{"line":15,"column":38,"offset":285},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.elasticsearch"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.react","alias":"React","position":{"start":{"line":16,"column":3,"offset":288},"end":{"line":16,"column":22,"offset":307},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.react"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"dev.nextjs","alias":"NextJs","position":{"start":{"line":17,"column":3,"offset":310},"end":{"line":17,"column":24,"offset":331},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"dev.nextjs"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance","alias":"Finance tools","position":{"start":{"line":19,"column":4,"offset":336},"end":{"line":19,"column":29,"offset":361},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.ledger","alias":"Ledger","position":{"start":{"line":20,"column":3,"offset":364},"end":{"line":20,"column":28,"offset":389},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.ledger"}},{"type":"wiki","from":{"fname":"root","id":"8DgvZQhkfr4OxXTq7oX8p","vaultName":"vault"},"value":"finance.hledger","alias":"Hledger","position":{"start":{"line":21,"column":3,"offset":392},"end":{"line":21,"column":30,"offset":419},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"finance.hledger"}}],"anchors":{"welcome-to-my-note":{"type":"header","text":"Welcome to my note","value":"welcome-to-my-note","line":8,"column":0,"depth":1},"topics":{"type":"header","text":"Topics","value":"topics","line":11,"column":0,"depth":1},"programming-language":{"type":"header","text":"Programming Language","value":"programming-language","line":12,"column":0,"depth":2},"media":{"type":"header","text":"Media","value":"media","line":16,"column":0,"depth":2},"video":{"type":"header","text":"Video","value":"video","line":17,"column":0,"depth":3},"development":{"type":"header","text":"Development","value":"development","line":20,"column":0,"depth":2},"finance-tools":{"type":"header","text":"Finance tools","value":"finance-tools","line":25,"column":0,"depth":2},"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":31,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":35,"column":0,"depth":2}},"children":["FQhBPq4aS6x9DOptKmnOg","qICYwYVyKusiFAEyNt3cW","dqqbqwres0mwnmm56y70t78","lcbbM6iSiDijXw3ljTXti","ZpQdEjz6MWYVcz5Fm0wNo","HfK5n8lFMUPCVKJAmEpko","cR7GPfJpXiNkbUx1M2KQ0","8LxVYi89COu6QjGMl9b8D","Jj4ARdDvNQwLk7jx7H7Wt"],"parent":null,"data":{},"body":"\n# Welcome to my note\nI took notes to help me remember and understand the topic better.\n\n# Topics\n## Programming Language\n* [[C++|lang.cpp]]\n* [[Java|lang.java]]\n\n## Media\n### [[Video|media.video]]\n* [[h264|media.video.codec.h264]]\n\n## Development\n* [[Elasticsearch|dev.elasticsearch]]\n* [[React|dev.react]]\n* [[NextJs|dev.nextjs]]\n\n## [[Finance tools|finance]]\n* [[Ledger|finance.ledger]]\n* [[Hledger|finance.hledger]]\n\n\n---\n# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{}},"workspace":{"vaults":[{"fsPath":"vault","sync":"noCommit","remote":{"type":"git","url":"git@github.com:ggLuigi/docs.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"dendronVersion":"0.84.0"},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"assetsPrefix":"/mydocs","copyAssets":true,"siteHierarchies":["root"],"enableSiteLastModified":true,"siteRootDir":"docs","siteUrl":"https://ggluigi.github.io","enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"writeStubs":false,"seo":{"title":"Dendron","description":"Personal knowledge space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enablePrettyLinks":true,"siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"CQgNUiY4rSgejxxCZYPWy"},"buildId":"HdsMOY8ETXdW0sdHJiiIf","assetPrefix":"/mydocs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>